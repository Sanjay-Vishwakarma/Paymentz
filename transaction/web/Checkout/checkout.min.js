/**
 * Created by Rihen on 2/26/2019.
 */
var options,container,backdrop,iframe,load,PZConstructor=window.PZCheckout=function(t){console.log(t),options=t},Container=function(){(container=document.createElement("div")).className="checkout-container",container.innerHTML="<style>.lds-spinner{left: 50%;top: 50%;position: fixed;margin-left: -16px;margin-top: -16px;display:inline-block;width:64px;height:64px}.lds-spinner div{transform-origin:32px 32px;animation:lds-spinner 1.2s linear infinite}.lds-spinner div:after{content:' ';display:block;position:absolute;top:3px;left:29px;width:5px;height:14px;border-radius:20%;background:#fff}.lds-spinner div:nth-child(1){transform:rotate(0);animation-delay:-1.1s}.lds-spinner div:nth-child(2){transform:rotate(30deg);animation-delay:-1s}.lds-spinner div:nth-child(3){transform:rotate(60deg);animation-delay:-.9s}.lds-spinner div:nth-child(4){transform:rotate(90deg);animation-delay:-.8s}.lds-spinner div:nth-child(5){transform:rotate(120deg);animation-delay:-.7s}.lds-spinner div:nth-child(6){transform:rotate(150deg);animation-delay:-.6s}.lds-spinner div:nth-child(7){transform:rotate(180deg);animation-delay:-.5s}.lds-spinner div:nth-child(8){transform:rotate(210deg);animation-delay:-.4s}.lds-spinner div:nth-child(9){transform:rotate(240deg);animation-delay:-.3s}.lds-spinner div:nth-child(10){transform:rotate(270deg);animation-delay:-.2s}.lds-spinner div:nth-child(11){transform:rotate(300deg);animation-delay:-.1s}.lds-spinner div:nth-child(12){transform:rotate(330deg);animation-delay:0s}@keyframes lds-spinner{0%{opacity:1}100%{opacity:0}}</style>",container.style="z-index:9999;position: fixed;top: 0;display:none;left: 0;height:100%;width:100%;-webkit-overflow-scrolling: touch;-webkit-backface-visibility: hidden;overflow-y:visible;transition: 0.3s ease-out;";var t={style:"z-index:9999;position: fixed;top: 0;display:none;left: 0;height:100%;width:100%;-webkit-overflow-scrolling: touch;-webkit-backface-visibility: hidden;overflow-y:visible;transition: 0.3s ease-out;"};for(var e in t)for(var n in t[e])t[e].hasOwnProperty(n)&&container.setAttribute(e,t[e]);document.body.appendChild(container)};function myFunction(){Container(),container.style.display="block",backdrop=document.createElement("div");var t={style:"min-height: 100%;transition:0.3s ease-out;-webkit-transition:0.3s ease-out;-moz-transition:0.3s ease-out;position:fixed;top: 0;left: 0;width:100%;height:100%;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#96000000, endColorstr=#96000000);background: rgba(0, 0, 0, 0.6);"};for(var e in t)for(var n in t[e])t[e].hasOwnProperty(n)&&backdrop.setAttribute(e,t[e]);container.appendChild(backdrop),(load=document.createElement("div")).innerHTML="<div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>";var o={class:"lds-spinner"};for(var e in o)for(var n in o[e])o[e].hasOwnProperty(n)&&load.setAttribute(e,o[e]);backdrop.appendChild(load),(iframe=document.createElement("iframe")).className="embed-responsive-item";var i={style:"opacity: 1; height: 100%; position: relative; background: none; display: block; border: 0 none transparent; margin: 0px; padding: 0px;transition: 0.3s ease-out;",allowtransparency:!0,frameborder:0,width:"100%",height:"100%",id:"f",name:"myFrame"};for(var e in i)for(var n in i[e])i[e].hasOwnProperty(n)&&iframe.setAttribute(e,i[e]);backdrop.appendChild(iframe),backdrop.addEventListener("click",function(){document.body.removeChild(container)}),console.log(iframe)}var alphaNumeric_val=/^[a-z0-9]+$/i,URLRegex=/(http|https):\/\/(\w+:{0,1}\w*)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function check_object_values(){if(console.log(options),options.amount=parseFloat(Math.round(100*Number(options.amount))/100).toFixed(2),options.TMPL_AMOUNT=parseFloat(Math.round(100*options.TMPL_AMOUNT)/100).toFixed(2),isNaN(options.toid))return alert("Toid should be number"),!1;if(!options.toid||0===options.toid.length)return alert("Toid should not be empty"),!1;if(options.toid.toString().length>10)return alert("Max length for toid is 10"),!1;if("string"!=typeof options.totype)return alert("Totype should be of string type"),!1;if(!options.totype||0===options.totype.length)return alert("Totype should not be empty"),!1;if(options.totype.toString().length>30)return alert("Max Length of totype should be less then 30"),!1;if(0!=alphaNumeric_val.test(options.totype)){if(options.mkey&&0!==options.mkey.length){if(options.merchantTransactionId&&0!==options.merchantTransactionId.length){if(options.merchantTransactionId.toString().length>=100)return alert("Description length should be less than or equal to 100"),!1;if(0==alphaNumeric_val.test(options.merchantTransactionId))return alert("Description should be alpha numeric only, No special characters are allowed"),!1;if(/^[0-9]{1,8}\.[0-9]{2}$/.test(options.amount)){if(/^[0-9]{1,8}\.[0-9]{2}$/.test(options.TMPL_AMOUNT)){if(options.merchantRedirectUrl&&0!==options.merchantRedirectUrl.length){if(options.TMPL_CURRENCY.toString().length>3)return alert("Currency length should be less than or equal to 3"),!1;if(URLRegex.test(options.hostURL)){console.log("Successful");var t=document.createElement("form");return myFunction(),t.setAttribute("action",options.hostURL),t.setAttribute("method","POST"),t.setAttribute("target","myFrame"),t.innerHTML=objToParams(options),document.body.appendChild(t),t.submit(),document.body.removeChild(t),console.log(t),checkFrame(),!0}return alert("Please enter valid URL."),!1}return alert("Redirect url should not be empty"),!1}return alert("Amount upto 8 digits only"),!1}return alert("Amount upto 8 digits only"),!1}return alert("Description should not be empty"),!1}return alert("mKey should not be empty"),!1}alert("Please enter alpha numeric values only")}function checkFrame(){document.getElementById("f").onload=function(){load.className+="hide",iframe.contentWindow.postMessage({name:"Message from MyFirstJs to ContentJs",redirecturl:options.merchantRedirectUrl},"*")}}var eventMethod=window.addEventListener?"addEventListener":"attachEvent",eventer=window[eventMethod],messageEvent="attachEvent"==eventMethod?"onmessage":"message";eventer(messageEvent,function(t){console.log("Message from ContentJs to MyFirstJs",t.data),container&&(document.body.removeChild(container),options.handler(t.data),t.data.status?console.log(t.data.status):console.log("WASSUUPPPPP"))},!1);var objToParams=function(t){var e="",n="";for(var o in t){var i=t[o];(t[o]instanceof Array||t[o]instanceof Object)&&(i=encodeURIComponent(JSON.stringify(i))),""!=e&&(e+="&"),e+=o+"="+encodeURIComponent(i),n=n+'<input type="hidden" name="'+o+'" value="'+i+'">'}return n};function timer(){i++,setInterval(function(){alert("Hello"),document.body.removeChild(container),console.log(i)},36e4)}