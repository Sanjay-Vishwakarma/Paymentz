<%@ page import="com.directi.pg.Admin,com.directi.pg.Functions,
                 com.directi.pg.Logger" %>
<%@ include file="functions.jsp" %>
<%@ include file="index.jsp" %>
<%@ page import="com.manager.enums.Currency" %>
<%@ page import="org.owasp.esapi.ESAPI" %>
<%@ page import="java.math.BigDecimal" %>
<%@ page import="java.util.Enumeration" %>


<%!
    private static Logger log=new Logger("membermappingpreference.jsp");
    Functions functions=new Functions();
%>

<script src="/icici/css/jquery-1.12.4.min.js"></script>
<script src="/icici/css/jquery-ui.min.js"></script>
<script src="/icici/javascript/gateway-account-member-terminalid1.js"></script>
<script src="/icici/javascript/gateway-account-member-terminalid.js"></script>

<!DOCTYPE html>
<html>
<head>
    <meta charset = "utf-8">
    <META content="text/html; charset=windows-1252" http-equiv=Content-Type>
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <title> Member Mapping Details </title>

    <link rel="stylesheet" type="text/css" href="/merchant/stylepoptuk/poptuk.css">
    <script type='text/javascript' src='/merchant/stylepoptuk/poptuk.js'></script>
    <script src="/icici/css/am_multipleselection/bootstrap-multiselect.js"></script>
    <link href="/icici/css/am_multipleselection/bootstrap-multiselect.css" rel="stylesheet" />
    <script src="/merchant/NewCss/libs/jquery-icheck/icheck.min.js"></script>
    <script>
        function lancer(terminal) {
            poptuk(document.getElementById('poptuk'+terminal).style.display="",terminal);
        }
    </script>
    <style type="text/css">
        #checkboxes {
            display: none;
            border: 1px #dadada solid;
            position: absolute;
            width: 100%;
            background-color: #ffffff;
            z-index: 1;
            height: 130px;
            overflow-x: auto;
        }

        #checkboxes label {
            display: block;
        }

        #checkboxes label:hover {
            background-color: #1e90ff;
        }

        input[type="checkbox"]{
            width: 18px; /*Desired width*/
            height: 18px; /*Desired height*/
        }
        .icheckbox_square-aero{
            margin: 3px 5px;
        }

        /********************************************************************************/

        .multiselect-container>li {
            padding: 0;
            margin-left: 31px;
        }
        .open>#multiselect-id.dropdown-menu {
            display: block;
        }
        .multiselect-container>li>a>label {
            margin: 0;
            height: 24px;
            padding-left:1px; !important;
            text-align: left;
        }
        span.multiselect-native-select {
            position: relative;
        }

        @supports (-ms-ime-align:auto) {
            span.multiselect-native-select {
                position: static!important;
            }
        }

        select[multiple], select[size] {
            height: auto;
            border-color: rgb(169, 169, 169);
        }
        .widget .btn-group {
            z-index: 1;
        }

        .btn-group, .btn-group-vertical {
            position: relative;
            vertical-align: middle;
            border-radius: 4px;
        }
        #mainbtn-id.btn-default {
            color: #333;
            background-color: #fff;
            border-color: #333;
            padding: 6px;
        }
        .btn-group>.btn:first-child {
            margin-left: 0;
        }

        .btn-group>.btn:first-child {
            margin-left: 0;
        }

        .btn-group>.btn, .btn-group-vertical>.btn {
            position: relative;
            float: left;
        }
        .multiselect-container {
            position: absolute;
            list-style-type: none;
            margin: 0;
            padding: 0;
        }
        #multiselect-id.dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            z-index:500;
            display: none;
            float: left;
            min-width: 160px;
            font-size: 14px;
            font-family: "Open Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
            list-style: none;
            background-color: #fff;
            border: 1px solid #ccc;
            border: 1px solid rgba(0,0,0,0.15);
            border-radius: 4px;
            -webkit-box-shadow: 0 6px 12px rgba(0,0,0,0.175);
            box-shadow: 0 6px 12px rgba(0,0,0,0.175);
            background-clip: padding-box;
        }
        #mainbtn-id .multiselect-selected-text{
            font-size: 12px;
            font-family: "Open Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
        }
        #mainbtn-id.btn-default, #mainbtn-id.btn-default:focus, #mainbtn-id.btn-default.focus, #mainbtn-id.btn-default:active, #mainbtn-id.btn-default.active, .open>.dropdown-toggle#mainbtn-id.btn-default {
            color: #333;
            /*color: #fff;*/
            background-color: white!important;
            border-color: #ddd!important;
            text-align: left;
            width: 187px; !important;
        }
        .multiselect-container .active >a>label
        {
            color:#fff; !important;
        }
        .btn .caret {
            position: absolute;
            display: inline-block;
            width: 0px;
            height: 1px;
            margin-left: 2px;
            vertical-align: middle;
            border-top: 7px solid;
            border-right: 4px solid transparent;
            border-left: 4px solid transparent;
            float: right;
            margin-top: 5px;
            box-sizing: inherit;
            top:13px;
            right:5px;
            margin-top: -2px;
        }
        .fa-chevron-down{
            position: absolute;
            right:0px;
            top: 0px;
            margin-top: -2px;
            vertical-align: middle;
            float: right;
            font-size: 9px;
        }
        #mainbtn-id
        {
            overflow: hidden;
            display: block;
        }
        .cardLimitCheck,.cardAmountLimitCheck,.amountLimitCheck
        {
            color: #001962;
            text-valign: center;
            font-family: "Open Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
            font-size: 12px;
            FONT-WEIGHT: normal;
            height: 25px;
            -webkit-border-radius: 4px;
            -moz-border-radius: 4px;
            border-radius: 4px;
        }
        /********************************************************************************/
    </style>

</head>
<body>

<script type="text/javascript" language="JavaScript" src="/icici/javascript/gateway-accountid.js"></script>
<script type="text/javascript" language="JavaScript" src="/icici/javascript/gateway-accountid2.js"></script>
<br><br><br><br><br><br>
<center><h4 class="textb" style="margin-left: 15%"><b>Member Mapping Details</b> </h4></center>
<%
    ctoken = ((User)session.getAttribute("ESAPIUserSessionKey")).getCSRFToken();

    if (Admin.isLoggedIn(session))
    {
        String str = "";
        String pgtypeid = "";
        String currency= "";
        //String memberid ="";
        currency = Functions.checkStringNull(request.getParameter("currency"))==null?"":request.getParameter("currency");
        pgtypeid = Functions.checkStringNull(request.getParameter("pgtypeid"))==null?"":request.getParameter("pgtypeid");
        String accountid2 =Functions.checkStringNull(request.getParameter("accountid"))==null?"":request.getParameter("accountid");
        // memberid = Functions.checkStringNull(request.getParameter("memberid"))==null?"":request.getParameter("memberid");
        //TreeMap<String,GatewayType> gatewayTypeTreeMap = GatewayTypeService.getAllGatewayTypesMap();
        //TreeMap<Integer, GatewayAccount> accountDetails = GatewayAccountService.getAccountDetails();

        String reqaccountid="";
        if(request.getAttribute("accountid")!=null)
            reqaccountid=    (String)request.getAttribute("accountid");

        String memberId="";
        if(request.getAttribute("memberid")!=null)
            memberId = (String)request.getAttribute("memberid");

        if(pgtypeid!=null)str = str + "&pgtypeid=" + pgtypeid;
        else
            pgtypeid="";
       /* if(currency!=null)str = str + "&currency=" + currency;
        else
            currency="";
        if(accountid2!=null)str = str + "&accountid=" + accountid2;
        else
            accountid2="";*/
%>
<script type="text/javascript">
    function check()
    {   var error="";
        var memberid=document.form1.elements["memberid"].value;
        var accountid=document.form1.elements["accountid"].value;
        var paymodeid=document.form1.elements["paymodeid"].value;
        var cardtypeid=document.form1.elements["cardtypeid"].value;
        var automaticrecurring=document.form1.elements["automaticrecurring"].value;
        var manualrecurring=document.form1.elements["manualrecurring"].value;



        if(memberid=="")
        {
            error+="Enter Valid MemberID \n";
        }
        if(accountid=="")
        {
            error+="Select Valid Account ID\n";
        }
        if(paymodeid=="")
        {
            error+="Select Valid Paymode ID\n";
        }
        if(cardtypeid=="")
        {
            error+="Select Valid Card Type ID\n";
        }
        if((automaticrecurring=="Y" && manualrecurring=="Y"))
        {
            error+="Automatic recurring and Manual recurring cannot be Y at a time.\n";
        }
        if(error!="")
        {
            window.alert(error);
        }
        else
        {
            document.getElementById("form1").submit();
        }
    }
    function confirmsubmit(i)
    {
        var r= window.confirm("Are You Sure you want to Update The Details");
        if(r==true)
        {
            document.getElementById("charges"+i).submit();
        }
        else
        {

        }
    }
    function confirmsubmit2(i)
    {
        if( document.getElementById("action"+i).value=="DELETE")
        {
            var r= window.confirm("Are You Sure you want to Delete The Mapping");
            if(r==true)
            {
                document.getElementById("details"+i).submit();
            }
            else
            {

            }
        }
        if( document.getElementById("action"+i).value=="UPDATE")
        {

            var error="";
            var automaticrecurring1=document.getElementById("details"+i).elements["automaticrecurring1"].value;
            var manualrecurring1=document.getElementById("details"+i).elements["manualrecurring1"].value;

            if((automaticrecurring1=="Y" && manualrecurring1=="Y"))
            {
                error+="Automatic recurring and Manual recurring cannot be Y at a time.\n";
            }
            if(error!="")
            {
                window.alert(error);
            }
            else
            {
                document.getElementById("details"+i).submit();
            }
        }
        else
        {
            document.getElementById("details"+i).submit();
        }
    }
    function confirmgateway()
    {
        if(document.form1.elements["accountid"].value=="")
        {
            window.alert("Please Select Account ID");
        }
        else
        {
            var accountid=form1.elements["accountid"].value;
            window.open('GetGatewayAccount?accountid='+accountid+'&ctoken=<%=user.getCSRFToken()%>', 'newwindow', 'width=500, height=350');
            return false;
        }
    }
</script>
<script type="text/javascript">
    $(function ()
    {
        $(document).ready(function(){
            $(".caret").addClass('icon2');
            $('.multiselect-selected-text').addClass("filter-option pull-left");
            firefox=navigator.userAgent.search("Firefox");
            if(firefox>-1)
            {
                $('.icon2').removeClass("caret");
                $('.icon2').addClass("fa fa-chevron-down");
                $('.icon2').css({"height": "30px","width":"17px","text-align":"center","background-color":"#E6E2E2","padding-top":"6px","margin-top": "0px","border":"1px solid #C7BFBF"});
                $('.dropdown-toggle').css({"padding":"0px","vertical-align":"middle","height":"25px"});
                $('.tr0 .dropdown-toggle .icon2').css({"background-color":"white","border":"0px"});
                $('.tr1 .dropdown-toggle .icon2').css({"background-color":"white","border":"0px"});
                $('.multiselect-selected-text').css({"padding-top": "4px","padding-bottom":"10px","padding-left":"10px","vertical-align":"middle"});
            }
        });
            $('#whitelisting').multiselect({
                buttonText: function (options, select)
                {
                    var labels = [];
                    if (options.length === 0)
                    {
                        labels.pop();
                        document.getElementById('whitelistcode').value = labels;
                        return 'Select Whitelist Details';
                    }
                    else
                    {
                        options.each(function ()
                        {
                            labels.push($(this).val());
                        });
                        document.getElementById('whitelistcode').value = labels;
                        return labels.join(', ') + '';
                    }
                }
            });
        });
</script>

<form id="form1" name="form1" action="SetAccount?ctoken=<%=ctoken%>" method ="POST" >
    <div class="reporttable">
        <%
            String errormsg2 = (String) request.getAttribute("error1");
            if (errormsg2 != null)
            {
                out.println("<table align=\"center\"><tr><td><font class=\"textb\"><b>");
                out.println(errormsg2);
                out.println("</b></font>");
                out.println("</td></tr></table>");
            }
        %>
        <%
            if (request.getAttribute("success1")!=null)
            {
                out.println("<table align=\"center\"><tr><td><font class=\"textb\"><b>");
                out.println((String)request.getAttribute("success1"));
                out.println("</b></font>");
                out.println("</td></tr></table>");
            }
        %>
        <table align=center border="1" cellpadding="2" cellspacing="0" width="10%" class="table table-striped table-bordered table-green dataTable">
            <tr>
                <td  class="th0" colspan="6" align="center">
                    Create Account</td>
            </tr>
            <tr>
                <td class="textb"  valign="middle" align="center">Member ID</td>
                <td><input id="memberid" class="txtbox" type=text  name="memberid"></td>

                <td class="textb"  valign="middle" align="center" >PayMode ID</td>
                <td><select id="paymodeid" name="paymodeid" class="txtbox"> <option value="" default>Select Paymodeid</option>
                    <%
                        Hashtable hash=(Hashtable) request.getAttribute("paymodeids");
                        Enumeration paymodeenum=hash.keys();
                        String paymodeid="";
                        String paymode="";
                        while (paymodeenum.hasMoreElements())
                        {
                            paymodeid=(String)paymodeenum.nextElement();
                            paymode=(String) hash.get(paymodeid);
                    %>
                    <option value="<%=ESAPI.encoder().encodeForHTMLAttribute(paymodeid)%>">
                        <%=ESAPI.encoder().encodeForHTML(paymode)%>
                    </option>
                    <% } %>
                </select>
                </td>

                <td class="textb"  valign="middle" align="center" >Card Type ID</td>
                <td><select id="cardtypeid" name="cardtypeid" class="txtbox"> <option value="" default>Select Card Typeid</option>
                    <%
                        Hashtable hash1=(Hashtable) request.getAttribute("cardtypeids");
                        Enumeration cardtypeenum=hash1.keys();
                        String cardtypeid="";
                        String cardtype="";
                        while (cardtypeenum.hasMoreElements())
                        {
                            cardtypeid=(String)cardtypeenum.nextElement();
                            cardtype=(String) hash1.get(cardtypeid);
                    %><option value="<%=ESAPI.encoder().encodeForHTMLAttribute(cardtypeid)%>"  >
                        <%=ESAPI.encoder().encodeForHTML(cardtype)%>
                    </option>
                    <% } %>
                </select>
                </td>
            </tr>
            <tr>
                <td class="textb"  valign="middle" align="center" >Gateway</td>
                <td>
                    <input name="pgtypeid" id="pgtypeid" value="<%=pgtypeid%>" class="txtbox" autocomplete="on">
                </td>

                <td class="textb"  valign="middle" align="center" >Accounts</td>
                <td>
                    <input name="accountid" id="accid" value="<%=reqaccountid%>" class="txtbox" autocomplete="on">
                </td>

            </tr>
            <tr>
                <td  valign="middle" align="center" class="th0" colspan=6 ><font size=2>Limits</font></td>
            </tr>
            <tr>
                <td class="textb"   valign="middle" align="center">Daily Amount Limit</td>
                <td class="textb" width="100" valign="middle" align="center" >Weekly Amount Limit</td>
                <td class="textb"  WIDTH="20" align="middle" align="center">Monthly Amount Limit</td>
                <td class="textb"  valign="middle" align="center" >Daily Card Limit</td>
                <td class="textb"  valign="middle" align="center">Weekly Card Limit</td>
                <td class="textb"  valign="middle" align="center">Monthly Card Limit</td>
            </tr>
            <tr>
                <td  align="center"><input type=text  class="txtboxsmall" size=10 name='daily_amount_limit' value="100.00"></td>
                <td align="center"><input type=text class="txtboxsmall" size=10 name='weekly_amount_limit' value="100.00"></td>
                <td align="center"><input type=text class="txtboxsmall" size=10 name='monthly_amount_limit' value="100.00"></td>
                <td  align="center"><input type=text  class="txtboxsmall" size=10 name='daily_card_limit' value="5"></td>
                <td  align="center"><input type=text  class="txtboxsmall" size=10 name='weekly_card_limit' value="10" ></td>
                <td  align="center"><input type=text  class="txtboxsmall" size=10 name='monthly_card_limit' value="20"></td>
            </tr>
            <tr>
                <td class="textb"  valign="middle" align="center">Daily Card Amount Limit</td>
                <td class="textb" valign="middle" align="center" >Weekly Card Amount Limit</td>
                <td class="textb" valign="middle" align="center" >Monthly Card Amount Limit</td>
                <td class="textb" valign="middle" align="center" >Daily Avg Ticket</td>
                <td class="textb" valign="middle" align="center" >Weekly Avg Ticket</td>
                <td class="textb" valign="middle" align="center" >Monthly Avg Ticket</td>
            </tr>
            <tr>
                <td  align="center"><input type=text class="textb" size=10 name='daily_card_amount_limit' value="1000.00"></td>
                <td  align="center"><input type=text class="txtboxsmall" size=10 name='weekly_card_amount_limit' value="5000.00"></td>
                <td  align="center"><input type=text class="txtboxsmall" size=10 name='monthly_card_amount_limit' value="10000.00"></td>
                <td  align="center"><input type=text class="txtboxsmall" size=10 name='daily_avg_ticket' value="150.00"></td>
                <td  align="center"><input type=text class="txtboxsmall" size=10 name='weekly_avg_ticket' value="150.00"></td>
                <td  align="center"><input type=text class="txtboxsmall" size=10 name='monthly_avg_ticket' value="150.00"></td>
            </tr>
            <tr>
                <td class="textb" valign="middle" align="center" >Min Transaction Amount</td>
                <td class="textb" valign="middle" align="center" >Max Transaction Amount</td>
            </tr>
            <tr>
                <td  align="center"><input type=text class="txtboxsmall" size=10 name='min_trans_amount' value="50.00"></td>
                <td  align="center"><input type=text class="txtboxsmall" size=10 name='max_trans_amount' value="1000.00"></td>
            </tr>
            <td  valign="middle" align="center"  class="th0" colspan=6 ><font size=2>Others</font></td>
            </tr>
            <tr>
                <td class="textb"   valign="middle" align="center" >IsActive</td>
                <td class="textb"width="50" valign="middle" align="center" >Priority</td>
                <td class="textb"  valign="middle" align="center">IsTest</td>
                <td class="textb"  valign="middle" align="center">AutomaticRecurring</td>
                <td class="textb"  valign="middle" align="center">isRestrictedTicketActive</td>
                <td class="textb" valign="middle" align="center" >isTokenizationActive</td>
            </tr>
            <tr>
                <td  align="center"><select name='isActive' class="txtboxsmall"><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute("Y")));%></select></td>
                <td  align="center"><select id="priority" name="priority" class="txtboxsmall" >
                    <option value="1" default>1</option>
                    <option value="2" default>2</option>
                    <option value="3" default>3</option>
                    <option value="4" default>4</option>
                    <option value="5" default>5</option>
                </select>
                </td>
                <td  align="center"><select name='isTest' class="txtboxsmall"><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute("N")));%></select></td>
                <td  align="center"><select name='is_recurring' id="automaticrecurring" class="txtboxsmall"><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute("N")));%></select></td>
                <td  align="center"><select name='isRestrictedTicketActive' class="txtboxsmall"><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute("N")));%></select></td>
                <td  align="center"><select name='isTokenizationActive' class="txtboxsmall"><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute("N")));%></select></td>
            </tr>
            <tr>
                <td class="textb"   valign="middle" align="center" >ManualRecurring</td>
                <td class="textb" valign="middle" align="center" >AddressDetailsDisplay</td>
                <td class="textb" valign="middle" align="center" >AddressValidation</td>
                <td class="textb" valign="middle" align="center" >Card Details Required</td>
                <td class="textb" valign="middle" align="center" >Is PSTTerminal</td>
                <td class="textb" valign="middle" align="center" >Is CardEncryptionEnable</td>
            </tr>
            <tr>
                <td  align="center"><select name='isManualRecurring' id="manualrecurring" class="txtboxsmall"><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute("N")));%></select></td>
                <td  align="center"><select name='addressDetails' class="txtboxsmall"><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute("Y")));%></select></td>
                <td  align="center"><select name='addressValidation' class="txtboxsmall"><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute("Y")));%></select></td>
                <td  align="center"><select name='cardDetailRequired' class="txtboxsmall"><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute("Y")));%></select></td>
                <td  align="center"><select name='isPSTTerminal' class="txtboxsmall"><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute("N")));%></select></td>
                <td  align="center"><select name='isCardEncryptionEnable' class="txtboxsmall"><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute("N")));%></select></td>
            </tr>
            <tr>
                <td class="textb" valign="middle" align="center" >Risk Rule Activation</td>
                <td class="textb" valign="middle" align="center" >Settlement Currency</td>
                <td class="textb" valign="middle" align="center" >Min Payout Amount</td>
                <td class="textb" valign="middle" align="center" >Payout Activation</td>
                <td class="textb" valign="middle" align="center" >Auto Redirect Request</td>
                <td class="textb" valign="middle" align="center" >Is BinRouting</td>
                <%--<td class="textb" valign="middle" align="center" >Reject 3D Card</td>--%>

            <tr>
                <td  align="center">
                    <select name='riskruleactivation' class="txtboxsmall"><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute("N")));%>
                    </select>
                </td>
                <td  align="center">
                    <select name='settlementcurrency' class="txtboxsmall">
                        <%
                            for (Currency settlementCurrency:Currency.values())
                            {
                                out.println("<option value=\""+settlementCurrency.toString()+"\">"+settlementCurrency.toString()+"</option>");
                            }
                        %>
                    </select>
                </td>
                <td  align="center"><input type=text class="txtboxsmall" size=10 name='min_payout_amount' value="500.00"></td>
                <td  align="center">
                    <select name='payoutactivation' class="txtboxsmall"><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute("Y")));%>
                    </select>
                </td>

                <td  align="center">
                    <select name='autoRedirectRequest' class="txtboxsmall"><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute("N")));%>
                    </select>
                </td>
            <td  align="center">
                <select name='bin_routing' class="txtboxsmall"><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute("N")));%>
                </select>
            </td>
               <%-- <td  align="center">
                    <select name='reject3DCard' class="txtboxsmall"><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute("N")));%>
                    </select>
                </td>--%>
            </tr>
            </tr>
            <tr>
                <td class="textb" valign="middle" align="center" >Is CardWhitelisted</td>
                <td class="textb" valign="middle" align="center" >Is EmailWhitelisted</td>
                <td class="textb" valign="middle" align="center" >Currency Conversion</td>
                <td class="textb" valign="middle" align="center" >Conversion Currency</td>
                <td class="textb" valign="middle" align="center" >Emi Support</td>
                <td class="textb" valign="middle" align="center" >Whitelist Details</td>
            </tr>

            <tr>
                <td  align="center">
                    <select name='isCardWhitelisted' class="txtboxsmall"><%out.println(Functions.comboval2(ESAPI.encoder().encodeForHTMLAttribute("N")));%>
                    </select>
                </td>
                <td  align="center">
                    <select name='isEmailWhitelisted' class="txtboxsmall"><%out.println(Functions.comboval2(ESAPI.encoder().encodeForHTMLAttribute("N")));%>
                    </select>
                </td>
                <td  align="center">
                    <select name='currency_conversion' class="txtboxsmall"><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute("N")));%>
                    </select>
                </td>
                <td  align="center">
                    <select name='conversion_currency' class="txtboxsmall">
                        <%
                            for (Currency conversionCurrency:Currency.values())
                            {
                                out.println("<option value=\""+conversionCurrency.toString()+"\">"+conversionCurrency.toString()+"</option>");
                            }
                        %>
                    </select>
                </td>
                <td  align="center">
                    <select name='emi_support' class="txtboxsmall"><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute("N")));%>
                    </select>
                </td>
                <td  align="center">
                    <select id="whitelisting" size="1" class="multiselect txtboxsmall" multiple="multiple">
                        <option value="name">Card Holder Name</option>
                        <option value="ipAddress">IP Address</option>
                        <option value="expiryDate">Expiry Date</option>

                    </select>
                    <input type="hidden" id="whitelistcode" name="whitelistdetails" value="">
                </td>
            </tr>
            <tr>
                <td class="textb" valign="middle" align="center" >Card Limit Check</td>
                <td class="textb" valign="middle" align="center" >Card Amount Limit Check</td>
                <td class="textb" valign="middle" align="center" >Amount Limit Check</td>
            </tr>
            <tr>
                <td align="center">
                    <select name="cardLimitCheck" id="cardLimitCheck" class="cardLimitCheck">
                        <option value='N' selected >N</option>
                        <option value='terminal_Level'>Terminal Level</option>
                        <option value='account_Level'>Account Level</option>
                    </select>
                </td>
                <td align="center">
                    <select name="cardAmountLimitCheck" id="cardAmountLimitCheck" class="cardAmountLimitCheck">
                        <option value='N' selected >N</option>
                        <option value='terminal_Level'>Terminal Level</option>
                        <option value='account_Level'>Account Level</option>
                    </select>
                </td>
                <td align="center">
                    <select name="amountLimitCheck" id="amountLimitCheck" class="amountLimitCheck">
                        <option value='N' selected >N</option>
                        <option value='terminal_Level'>Terminal Level</option>
                        <option value='account_Level'>Account Level</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td  align=center colspan=6><input type="hidden" name="action" value="CREATE" >
                    <button align=center type="button" onclick="check()" value="CREATE" class="buttonform">CREATE</button>
                </td>
            </tr>
        </table>
    </div>
</form>
<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-default" style="margin-top: 0px">
            <div class="panel-heading" >
                Search
            </div>
            <form action="MemberMappingDetails?ctoken=<%=ctoken%>" method="post" name="F1" onsubmit="">
                <input type="hidden" value="<%=ctoken%>" name="ctoken" id="ctoken">
                <%
                    String errormsg1 = (String) request.getAttribute("error");
                    if (errormsg1 != null)
                    {
                        out.println("<table align=\"center\"><tr><td><font class=\"textb\"><b>");
                        out.println(errormsg1);
                        out.println("</b></font>");
                        out.println("</td></tr></table>");
                    }
                %>
                <%
                    if (request.getAttribute("success")!=null)
                    {
                        out.println("<table align=\"center\"><tr><td><font class=\"textb\"><b>");
                        out.println((String)request.getAttribute("success"));
                        out.println("</b></font>");
                        out.println("</td></tr></table>");
                    }
                %>
                <table  align="center" width="100%" cellpadding="2" cellspacing="2" style="margin-left:2.5%;margin-right: 2.5% ">
                    <tr>
                        <td>
                            <table border="0" cellpadding="5" cellspacing="0" width="100%"  align="center">
                                <tr><td colspan="4">&nbsp;</td></tr>
                                <tr>

                                    <td width="4%" class="textb">&nbsp;</td>
                                    <td width="8%" class="textb" >Gateway</td>
                                    <td width="3%" class="textb"></td>
                                    <td width="12%" class="textb">
                                        <input name="pgtypeid" id="gateway1" value="<%=pgtypeid%>" class="txtbox" autocomplete="on">
                                    </td>

                                    <td width="4%" class="textb"></td>
                                    <td width="8%" class="textb">Account ID</td>
                                    <td width="3%" class="textb"></td>
                                    <td width="12%" class="textb">
                                        <input name="accountid" id="accountid1" value="<%=reqaccountid%>" class="txtbox" autocomplete="on">
                                    </td>
                                </tr>

                                <tr><td colspan="4">&nbsp;</td></tr>

                                <tr>
                                    <td width="0%" class="textb">&nbsp;</td>
                                    <td width="22%" class="textb" >Member ID</td>
                                    <td width="3%" class="textb"></td>
                                    <td width="12%" class="textb">
                                        <input name="memberid" id="memberid1" class="txtbox" autocomplete="on" value=<%=memberId%>>
                                        <%-- <input name="memberid" size="10" class="txtbox" value=<%=reqmemberid%>>--%>
                                    </td>

                                    <td width="4%" class="textb">&nbsp;</td>
                                    <td width="8%" class="textb" >&nbsp;</td>
                                    <td width="3%" class="textb">&nbsp;</td>
                                    <td width="12%" class="textb"><button type="submit" class="buttonform">
                                        <span><i class="fa fa-clock-o"></i></span>
                                        &nbsp;&nbsp;Search
                                    </button></td>
                                    <td width="4%" class="textb"></td>
                                    <td width="8%" class="textb" >&nbsp;</td>
                                    <td width="3%" class="textb">&nbsp;</td>
                                    <td width="12%" class="textb">&nbsp;</td>

                                </tr>
                            </table>
                        </td></tr>
                </table>
            </form>
        </div></div></div>
<%
    hash = (Hashtable) request.getAttribute("memberdetails");
    Hashtable temphash = null;
    int records = 0;
    int totalrecords = 0;
    try
    {
        records = Integer.parseInt((String) hash.get("records"));
        totalrecords = Integer.parseInt((String) hash.get("totalrecords"));
    }
    catch (Exception e)
    {
        log.error("Records & TotalRecords is found null");
    }

%>
<%
    if(totalrecords>0)
    {
%>






<div class="reporttable">
    <form name="exportform" method="post"  action="ExportTerminalDetails?ctoken=<%=ctoken%>" >

            <input type="hidden" value="<%=ctoken%>" name="ctoken">
        <%--<input type="hidden" value="Admin" name="ExportRequest">--%>
               <input type="hidden" value=<%=memberId%> name="memberId" >
               <input type="hidden" value="<%=reqaccountid%>" name="accountid" >

        <button type="submit" class="button3" style="width:15%;margin-left:85% ;margin-top:0px"><b></b>&nbsp;&nbsp;&nbsp;<img width="80%" height="100%" border="0" src="/merchant/images/excel.png"></button>
    </form>
    <font class="info">Total records <%=totalrecords%></font>
    <div class="scroll">
        <table align=center border=2 class="table table-striped table-bordered table-green dataTable">
            <% String style = "td1";
                String style1=" display: none;border: 1px #dadada solid;position: absolute;width: 11%;background-color: #ffffff;z-index: 1;height: 100px;overflow-x: auto;";
                for (int pos = 1; pos <= records; pos++)
                {
                    String id = Integer.toString(pos);
                    String checkboxes="checkboxes"+pos;

                    int srno = Integer.parseInt(id) ;

                    if (pos % 2 == 0)
                        style = "tr0";
                    else
                        style = "tr1";

                    temphash = (Hashtable) hash.get(id);
                    memberId = (String) temphash.get("memberid");
                    String accountId = Functions.checkStringNull((String) temphash.get("accountid"));

                    paymodeid = "N/A";
                    cardtypeid = "N/A";
                    String monthly_amount_limit = "N/A";
                    String weekly_amount_limit = "N/A";
                    String daily_card_limit = "N/A";
                    String weekly_card_limit = "N/A";
                    String monthly_card_limit = "N/A";
                    String daily_amount_limit = "N/A";
                    String isReadOnly = "readonly";
                    boolean isName=false,isIpAddress=false,isExpiryDate=false;
                    String daily_card_amount_limit="",weekly_card_amount_limit="",monthly_card_amount_limit="",min_trans_amount="",max_trans_amount="",isActive="",priority="",isTest="",terminalid="",isRecurring="",isRestrictedTicketActive="",isTokenizationActive="",ManualRecurring="",addressDetails="",addressValidation="",cardDetailRequired="",isPSTTerminal="",isCardEncryptionEnable="",riskRuleActivation="",settlementCurrency="",daily_avg_ticket="",weekly_avg_ticket="",monthly_avg_ticket="",min_payout_amount="",payoutActivation="", autoRedirectRequest = "",reject3DCard = "",isCardWhitelisted="",isEmailWhitelisted="",currencyConversion="",conversionCurrency="",bin_routing="",emi_support="",whitelisting="",cardLimitCheck="",cardAmountLimitCheck="",amountLimitCheck="",actionExecutorId="",actionExecutorName="";
                    if (accountId != null)
                    {
                        isReadOnly = "";
                        paymodeid = ((String) temphash.get("paymodeid"));
                        cardtypeid = ((String) temphash.get("cardtypeid"));
                        monthly_amount_limit =(new BigDecimal((String) temphash.get("monthly_amount_limit"))).toString();
                        weekly_amount_limit = (new BigDecimal((String) temphash.get("weekly_amount_limit"))).toString();
                        daily_amount_limit = (new BigDecimal((String) temphash.get("daily_amount_limit"))).toString();
                        daily_card_limit = (new BigDecimal((String) temphash.get("daily_card_limit"))).toString();
                        weekly_card_limit = (new BigDecimal((String) temphash.get("weekly_card_limit"))).toString();
                        monthly_card_limit = (new BigDecimal((String) temphash.get("monthly_card_limit"))).toString();

                        daily_card_amount_limit = (new BigDecimal((String) temphash.get("daily_card_amount_limit"))).toString();
                        weekly_card_amount_limit  = (new BigDecimal((String) temphash.get("weekly_card_amount_limit"))).toString();
                        monthly_card_amount_limit = (new BigDecimal((String) temphash.get("monthly_card_amount_limit"))).toString();

                        daily_avg_ticket = (new BigDecimal((String) temphash.get("daily_avg_ticket"))).toString();
                        weekly_avg_ticket = (new BigDecimal((String) temphash.get("weekly_avg_ticket"))).toString();
                        monthly_avg_ticket = (new BigDecimal((String) temphash.get("monthly_avg_ticket"))).toString();

                        min_trans_amount = (new BigDecimal((String) temphash.get("min_transaction_amount"))).toString();
                        max_trans_amount = (new BigDecimal((String) temphash.get("max_transaction_amount"))).toString();
                        min_payout_amount = (new BigDecimal((String) temphash.get("min_payout_amount"))).toString();

                        isActive = (String) temphash.get("isActive");
                        priority = (String) temphash.get("priority");
                        isTest =  (String) temphash.get("isTest");
                        terminalid = (String) temphash.get("terminalid");
                        isRecurring = (String) temphash.get("is_recurring");
                        isRestrictedTicketActive = (String) temphash.get("isRestrictedTicketActive");
                        isTokenizationActive = (String) temphash.get("isTokenizationActive");
                        ManualRecurring = (String) temphash.get("isManualRecurring");
                        addressDetails = (String) temphash.get("addressDetails");
                        addressValidation = (String) temphash.get("addressValidation");
                        cardDetailRequired = (String) temphash.get("cardDetailRequired");
                        isPSTTerminal = (String) temphash.get("isPSTTerminal");
                        isCardEncryptionEnable = (String) temphash.get("isCardEncryptionEnable");
                        riskRuleActivation = (String) temphash.get("riskruleactivation");
                        settlementCurrency = (String) temphash.get("settlement_currency");
                        payoutActivation = (String) temphash.get("payoutActivation");
                        autoRedirectRequest = (String) temphash.get("autoRedirectRequest");
                        reject3DCard= (String) temphash.get("reject3DCard");
                        isCardWhitelisted=(String) temphash.get("isCardWhitelisted");
                        isEmailWhitelisted=(String) temphash.get("isEmailWhitelisted");
                        currencyConversion=(String)temphash.get("currency_conversion");
                        bin_routing=(String)temphash.get("binRouting");
                        emi_support =(String)temphash.get("emi_support");
                        whitelisting=(String)temphash.get("whitelisting_details");
                        cardLimitCheck=(String)temphash.get("cardLimitCheck");
                        cardAmountLimitCheck=(String)temphash.get("cardAmountLimitCheck");
                        amountLimitCheck=(String)temphash.get("amountLimitCheck");
                        actionExecutorId=(String)temphash.get("actionExecutorId");
                        actionExecutorName=(String)temphash.get("actionExecutorName");
                    }
            %>
            <tr><td><table><tr><td>
                <form id="details<%=pos%>" action="/icici/servlet/SetAccount?ctoken=<%=ctoken%>" method=post>
                    <style>
                        #checkboxes<%=pos%>{
                            display: none;
                            border: 1px #dadada solid;
                            position: absolute;
                            width: 100%;
                            background-color: #ffffff;
                            z-index: 1;
                            max-height: 100px;
                            overflow-x: auto;
                        }
                    </style>
                    <script>
                        var expanded1=false;
                        function showCheckboxes1(checkbox) {
                            console.log(checkbox)
                            var checkboxes = document.getElementById(checkbox);
                            if (!expanded1) {
                                checkboxes.style.display = "block";
                                expanded1 = true;
                            } else {
                                checkboxes.style.display = "none";
                                expanded1 = false;
                            }
                        }
                        function hideCheckbox(id){
                            console.log(" in hide --", id)
                            var checkboxes = document.getElementById(id);
                            checkboxes.style.display = "none";
                            expanded1 = false;
                        }
                    </script>
                    <input type="hidden" value="<%=ctoken%>" name="ctoken">
                    <input type=hidden value="<%=accountId%>" name="accountid" >
                    <input type=hidden value="<%=terminalid%>" name="terminalid" >

                    <table align=left class="table table-striped table-bordered table-hover table-green dataTable">
                        <tr>
                            <td width="50%" valign="middle" align="center" class="textb"><b>Terminal ID</b></td>
                            <td width="50%" valign="middle" align="center" class="textb" ><b>Member ID</b></td>
                            <td width="50%" valign="middle" align="center" class="textb" ><b>Account ID</b></td>

                            <td width="50%" valign="middle" align="center"  class="textb"><b>PayMode ID</b></td>
                            <td width="50%" valign="middle" align="center"  class="textb"><b>Card Type ID</b></td>
                            <td width="50%" valign="middle" align="center"  class="textb"><b>Monthly Amount Limit</b>
                            <td width="50%" valign="middle" align="center"  class="textb"><b>Weekly Amount Limit</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Daily Amount Limit</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Daily Card Limit</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Weekly Card Limit</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Monthly Card Limit</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Action</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Address<BR>DetailsDisplay</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Is PSTTerminal</b></td>
                        </tr>

                        <tr>
                            <td width="50" align="center" class="<%=style%>"><b><%=ESAPI.encoder().encodeForHTMLAttribute(terminalid)%></b></td>
                            <td width="100" align="center" class="<%=style%>"><input type=text style="width:100px;" class="txtboxsmall" name="memberid" value="<%=ESAPI.encoder().encodeForHTMLAttribute(memberId)%>" readonly></td>
                            <td width="50" align="center" class="<%=style%>"><button type="submit" class="goto" onclick="window.open('GetGatewayAccount?accountid=<%=ESAPI.encoder().encodeForHTMLAttribute(accountId)%>&ctoken=<%=user.getCSRFToken()%>', 'newwindow', 'width=500, height=350'); return false;"> <%=ESAPI.encoder().encodeForHTMLAttribute(accountId)%></button> </td>
                            <td width="100" align="center" class="<%=style%>"><input type=text class="txtboxsmall" align="center" size=10 name='paymodeid' value="<%=paymodeid%>" readonly></td>
                            <td width="100" align="center" class="<%=style%>"><input type=text class="txtboxsmall"style="width:100px;"name='cardtypeid' value="<%=ESAPI.encoder().encodeForHTMLAttribute(cardtypeid)%>" readonly></td>
                            <td width="100" align="center" class="<%=style%>"><input type=text class="txtboxsmall" style="width:100px;" name='monthly_amount_limit' value="<%=ESAPI.encoder().encodeForHTMLAttribute(monthly_amount_limit)%>" <%=isReadOnly%>></td>
                            <td width="100" align="center" class="<%=style%>"><input type=text class="txtboxsmall" style="width:100px;" name='weekly_amount_limit' value="<%=ESAPI.encoder().encodeForHTMLAttribute(weekly_amount_limit)%>" <%=isReadOnly%>></td>
                            <td width="100" align="center" class="<%=style%>"><input type=text class="txtboxsmall"style="width:100px;" name='daily_amount_limit' value="<%=ESAPI.encoder().encodeForHTMLAttribute(daily_amount_limit)%>" <%=isReadOnly%>></td>
                            <td width="100" align="center" class="<%=style%>"><input type=text class="txtboxsmall"style="width:100px;" name='daily_card_limit' value="<%=ESAPI.encoder().encodeForHTMLAttribute(daily_card_limit)%>" <%=isReadOnly%>></td>
                            <td width="100" align="center" class="<%=style%>"><input type=text class="txtboxsmall"style="width:100px;" name='weekly_card_limit' value="<%=ESAPI.encoder().encodeForHTMLAttribute(weekly_card_limit)%>" <%=isReadOnly%>></td>
                            <td width="100" align="center" class="<%=style%>"><input type=text class="txtboxsmall"size=10 name='monthly_card_limit' value="<%=ESAPI.encoder().encodeForHTMLAttribute(monthly_card_limit)%>" <%=isReadOnly%>></td>
                            <td width="100" align="center" class="<%=style%>"><select class="txtboxsmall" id=action<%=pos%> id="action<%=pos%>" name="action"><option value="UPDATE" default>UPDATE</option><option value="DELETE">DELETE</option> </select></td>
                            <td class="txtboxsmall" width="100" class="<%=style%>"><select name='addressDetails'><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute(addressDetails)));%></select></td>
                            <td class="txtboxsmall" width="100" class="<%=style%>"><select name='isPSTTerminal'><%=Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute(isPSTTerminal))%></select></td>
                            <td width="100" align="center" class="<%=style%>"><input type="button"onclick="confirmsubmit2(<%=pos%>)" class="goto" value="Save"></td>
                        </tr>
                        <tr>
                            <td class="textb"  width="100"valign="middle" align="center"><b>daily_card_amount_limit</b></td>
                            <td class="textb"  width="100"valign="middle" align="center"><b>weekly_card_amount_limit</b></td>
                            <td class="textb"  width="100"valign="middle" align="center"><b>monthly_card_amount_limit</b></td>
                            <td class="textb"  width="100"valign="middle" align="center"><b>min_trans_amount</b></td>
                            <td class="textb"  width="100"valign="middle" align="center"><b>max_trans_amount</b></td>
                            <td class="textb"  width="100"valign="middle" align="center"><b>daily_avg_ticket</b></td>
                            <td class="textb"  width="100"valign="middle" align="center"><b>weekly_avg_ticket</b></td>
                            <td class="textb"  width="100"valign="middle" align="center"><b>monthly_avg_ticket</b></td>
                            <td class="textb"  width="100"valign="middle" align="center"><b>isActive</b></td>
                            <td class="textb"  width="100"valign="middle" align="center"><b>priority</b></td>
                            <td class="textb"  width="100"valign="middle" align="center"><b>isTest</b></td>
                            <td class="textb"  width="100"valign="middle" align="center"><b>AutomaticRecurring</b></td>
                            <td class="textb"  width="100"valign="middle" align="center"><b>isRestrictedTicketActive</b></td>
                            <td class="textb"  width="100"valign="middle" align="center"><b>isTokenizationActive</b></td>
                        </tr>
                        <tr>
                            <td  align="center" width="100" class="<%=style%>"> <input type=text class="txtboxsmall"  size=10 name='daily_card_amount_limit' value="<%=ESAPI.encoder().encodeForHTMLAttribute(daily_card_amount_limit)%>"></td>
                            <td  align="center" width="100" class="<%=style%>"> <input type=text class="txtboxsmall"  size=10 name='weekly_card_amount_limit' value="<%=ESAPI.encoder().encodeForHTMLAttribute(weekly_card_amount_limit)%>"></td>
                            <td  align="center" width="100" class="<%=style%>"> <input type=text class="txtboxsmall"  size=10 name='monthly_card_amount_limit' value="<%=ESAPI.encoder().encodeForHTMLAttribute(monthly_card_amount_limit)%>"></td>
                            <td  align="center" width="100" class="<%=style%>"> <input type=text class="txtboxsmall"  size=10 name='min_trans_amount' value="<%=ESAPI.encoder().encodeForHTMLAttribute(min_trans_amount)%>"></td>
                            <td  align="center" width="100" class="<%=style%>"> <input type=text class="txtboxsmall"  size=10 name='max_trans_amount' value="<%=ESAPI.encoder().encodeForHTMLAttribute(max_trans_amount)%>"></td>
                            <td  align="center" width="100" class="<%=style%>"> <input type=text class="txtboxsmall"  size=10 name='daily_avg_ticket' value="<%=ESAPI.encoder().encodeForHTMLAttribute(daily_avg_ticket)%>"></td>
                            <td  align="center" width="100" class="<%=style%>"> <input type=text class="txtboxsmall"  size=10 name='weekly_avg_ticket' value="<%=ESAPI.encoder().encodeForHTMLAttribute(weekly_avg_ticket)%>"></td>
                            <td  align="center" width="100" class="<%=style%>"> <input type=text class="txtboxsmall"  size=10 name='monthly_avg_ticket' value="<%=ESAPI.encoder().encodeForHTMLAttribute(monthly_avg_ticket)%>"></td>
                            <td  align="center" width="100" class="<%=style%>"><select name='isActive'><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute(isActive)));%></select></td>
                            <td  align="center" width="100" class="<%=style%>"><select id="priority2" name="priority" >
                                <%
                                    Hashtable priorityHash=new Hashtable();
                                    priorityHash.put("1","1");
                                    priorityHash.put("2","2");
                                    priorityHash.put("3","3");
                                    priorityHash.put("4","4");
                                    priorityHash.put("5","5");
                                    Enumeration priorityenum=priorityHash.keys();

                                    String isDef="";
                                    String priorityvalue="";
                                    while (priorityenum.hasMoreElements())
                                    {
                                        priorityvalue=(String)priorityenum.nextElement();

                                        if((priorityvalue.trim()).equals(ESAPI.encoder().encodeForHTMLAttribute(priority)))
                                        {
                                            isDef="selected" ;
                                        }
                                        else
                                        {
                                            isDef="";
                                        }
                                %><option value="<%=ESAPI.encoder().encodeForHTMLAttribute(priorityvalue)%>" <%=isDef%>   >
                                <%=ESAPI.encoder().encodeForHTML(priorityvalue)%>
                            </option>
                                <% } %>
                            </select>
                            </td>
                            <td class="txtboxsmall" width="100" class="<%=style%>"><select name='isTest'><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute(isTest)));%></select></td>
                            <td class="txtboxsmall" width="100" class="<%=style%>"><select name='is_recurring' id="automaticrecurring1"><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute(isRecurring)));%></select></td>
                            <td class="txtboxsmall" width="100" class="<%=style%>"><select name='isRestrictedTicketActive'><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute(isRestrictedTicketActive)));%></select></td>
                            <td class="txtboxsmall" width="100" class="<%=style%>"><select name='isTokenizationActive'><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute(isTokenizationActive)));%></select></td>
                        </tr>
                        <tr>
                            <td class="textb"  width="100"valign="middle" align="center"><b>ManualRecurring</b></td>
                            <td class="textb" width="100"valign="middle" align="center"><b>AddressValidation</b></td>
                            <td class="textb" width="100"valign="middle" align="center"><b>CardDetailRequired</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Is CardEncryptionEnable</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Risk Rule Activation</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Settlement Currency</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Min Payout Amount</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Payout Activation</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Auto Redirect Request</b></td>
                            <%--<td width="50%"valign="middle" align="center"  class="textb"><b>Reject 3D Card</b></td>--%>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Is CardWhitelisted</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Is EmailWhitelisted</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Currency Conversion</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Conversion Currency</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Is Bin Routing</b></td>


                        </tr>
                        <tr>
                            <td class="txtboxsmall" width="100" class="<%=style%>"><select name='isManualRecurring' id="manualrecurring1"><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute(ManualRecurring)));%></select></td>
                            <td class="txtboxsmall" width="100" class="<%=style%>"><select name='addressValidation'><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute(addressValidation)));%></select></td>
                            <td class="txtboxsmall" width="100" class="<%=style%>"><select name='cardDetailRequired'><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute(cardDetailRequired)));%></select></td>
                            <td  align="center" width="100" class="<%=style%>"><select name='isCardEncryptionEnable'><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute(isCardEncryptionEnable)));%></select></td>
                            <td  align="center" width="100" class="<%=style%>"><select name='riskruleactivation'><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute(riskRuleActivation)));%></select></td>
                            <td  align="center" width="100" class="<%=style%>">
                                <select name='settlementcurrency'>
                                    <%
                                        for (Currency settlementcurrency:Currency.values())
                                        {
                                            String selected="";
                                            if(settlementcurrency.toString().equals(settlementCurrency))
                                            {
                                                selected="selected";
                                            }
                                            out.println("<option value=\""+settlementcurrency.toString()+"\" "+selected+">"+settlementcurrency.toString()+"</option>");
                                        }
                                    %>
                                </select>
                            </td>
                            <td  align="center" width="100" class="<%=style%>"><input type=text class="txtboxsmall"  size=10 name='min_payout_amount' value="<%=ESAPI.encoder().encodeForHTMLAttribute(min_payout_amount)%>"></td>
                            <td  align="center" width="100" class="<%=style%>"><select name='payoutactivation'><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute(payoutActivation)));%></select></td>
                            <td  align="center" width="100" class="<%=style%>"><select name='autoRedirectRequest'><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute(autoRedirectRequest)));%></select></td>
                            <%--<td  align="center" width="100" class="<%=style%>"><select name='reject3DCard'><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute(reject3DCard)));%></select></td>--%>
                            <td  align="center" width="100" class="<%=style%>"><select name='isCardWhitelisted'><%out.println(Functions.comboval2(ESAPI.encoder().encodeForHTMLAttribute(isCardWhitelisted)));%></select></td>
                            <td  align="center" width="100" class="<%=style%>"><select name='isEmailWhitelisted'><%out.println(Functions.comboval2(ESAPI.encoder().encodeForHTMLAttribute(isEmailWhitelisted)));%></select></td>
                            <td  align="center" width="100" class="<%=style%>"><select name='currency_conversion'><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute(currencyConversion)));%></select></td>
                            <td  align="center" width="100" class="<%=style%>">
                                <select name='conversion_currency'>
                                    <%
                                        for (Currency conversioncurrency:Currency.values())
                                        {
                                            String selected="";
                                            if(conversioncurrency.toString().equals(conversionCurrency))
                                            {
                                                selected="selected";
                                            }
                                            out.println("<option value=\""+conversioncurrency.toString()+"\" "+selected+">"+conversioncurrency.toString()+"</option>");
                                        }
                                    %>
                                </select>
                            </td>
                            <td  align="left" width="100" class="<%=style%>"><select name='bin_routing'><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute(bin_routing)));%></select></td>
                        </tr>
                        <tr>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Emi Support</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Whitelist Details</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Card Limit Check</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Card Amount Limit Check</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Amount Limit Check</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Action Executor Id</b></td>
                            <td width="50%"valign="middle" align="center"  class="textb"><b>Action Executor Name</b></td>


                        </tr>
                        <tr>
                            <td  align="left" width="100" class="<%=style%>"><select name='emi_support'><%out.println(Functions.comboval(ESAPI.encoder().encodeForHTMLAttribute(emi_support)));%></select></td>
                            <td  align="center" width="100" class="<%=style%>">
                                <select id="whitelist_<%=pos%>" multiple="multiple"  value="<%=whitelisting%>">
                                    <option class="option_<%=pos%>" value="name">Card Holder Name</option>
                                    <option class="option_<%=pos%>" value="ipAddress">IP Address</option>
                                    <option class="option_<%=pos%>" value="expiryDate">Expiry Date</option>
                                </select>
                                <input type="hidden" id="whitelistcode_<%=pos%>" name="whitelistdetails" value="<%=whitelisting%>">
                                <script>
                                    $(function ()
                                    {
                                        var value=[];
                                        var details='<%=whitelisting%>';
                                        value=details.split(",");
                                        for(var i in value)
                                        {
                                            $("#whitelist_<%=pos%> option[value='"+value[i]+"']").prop('selected', true);
                                        }
                                        $('#whitelist_<%=pos%>').multiselect({
                                            buttonText: function (options, select)
                                            {
                                                var labels = [];
                                                if (options.length === 0)
                                                {
                                                    console.log(" in if");
                                                    labels.pop();
                                                    document.getElementById('whitelistcode_<%=pos%>').value = labels;
                                                    return 'Select Whitelist Details';
                                                }
                                                else
                                                {
                                                    console.log(" in else");
                                                    options.each(function ()
                                                    {
                                                        labels.push($(this).val());
                                                    });
                                                    console.log("Label::::"+labels);
                                                    document.getElementById('whitelistcode_<%=pos%>').value = labels;
                                                    return labels.join(', ') + '';
                                                }
                                            }
                                        });
                                    });
                                </script>
                            </td>
                            <td  align="center" width="100" class="<%=style%>"><select name='cardLimitCheck' style="height: 20px;"><%out.println(Functions.comboval3(ESAPI.encoder().encodeForHTMLAttribute(cardLimitCheck)));%></select></td>
                            <td  align="center" width="100" class="<%=style%>"><select name='cardAmountLimitCheck' style="height: 20px;"><%out.println(Functions.comboval3(ESAPI.encoder().encodeForHTMLAttribute(cardAmountLimitCheck)));%></select></td>
                            <td  align="center" width="100" class="<%=style%>"><select name='amountLimitCheck' style="height: 20px;"><%out.println(Functions.comboval3(ESAPI.encoder().encodeForHTMLAttribute(amountLimitCheck)));%></select></td>
                            <%
                                if(!functions.isValueNull(actionExecutorId))
                                    actionExecutorId="-";
                                if(!functions.isValueNull(actionExecutorName))
                                    actionExecutorName="-";

                            %>
                            <td  align="center" width="100" class="<%=style%>"><b><%= actionExecutorId%></b></td>
                            <td  align="center" width="100" class="<%=style%>"><b><%= actionExecutorName%></b></td>

                        </tr>

                    </table>
                </form> </td></tr>
            </table>
            </td>
            </tr>
            <% if(pos<records){ %>
            <tr bgcolor="#FFFFFF" height=50>
                <td colspan=11>
                    &nbsp;
                </td>
            </tr>
            <%
                }
            %>

            <% } //end for
            %>
        </table>

        <%
            }
        %>
    </div>
</div>
<%
    }
    else
    {
        response.sendRedirect("/icici/logout.jsp");
        return;

    }
%>
</body>
</html>